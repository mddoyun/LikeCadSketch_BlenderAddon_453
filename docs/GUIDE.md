# LikeCadSketch Blender Add-on (Target: Blender 4.5.3)

본 문서는 이 저장소에서 개발을 진행할 때 따라야 할 공통 지침과 작업 흐름을 정의합니다. 이 지침은 초기 세팅, 코드 구조 요약(CODEMAP), Git 작업 이력(작업로그) 작성 및 동기화 방식까지 포함합니다.

## 개발 목표
- Blender 4.5.3 버전을 타겟으로 하는 애드온 개발
- 기능 단위로 작은 커밋과 명확한 작업로그 유지
- 코드와 문서를 함께 진화시키는 방식(문서 우선 합의 → 구현)

## 작업 전 공통 절차
1) `docs/GUIDE.md`(본 문서), `docs/CODEMAP.md`(전체 코드/함수 요약), `docs/WORKLOG.md`(Git 작업 이력 요약)를 훑어봅니다.
2) 질문이 필요한 부분을 정리합니다. (불명확한 요구사항, 경계 조건, 성능/UX 기준 등)
3) 질문을 이 이슈/대화 스레드에 남겨 합의를 받습니다.
4) 합의된 방향대로 작업을 시작합니다.

## 브랜치/커밋 운영
- 기본은 `main`(또는 `master`)에서 시작합니다. 필요 시 기능 단위의 짧은 브랜치를 사용합니다.
- 커밋 메시지는 다음 원칙을 따릅니다.
  - 제목(첫 줄)은 72자 이내, 변경 이유와 범위를 드러내도록 작성
  - 본문에는 다음 정보를 포함하는 것을 권장합니다.
    - When: YYYY-MM-DD (작업 날짜; 생략 시 훅에서 자동 보정)
    - Scope: 모듈/기능 범위
    - Changes: 무엇을 변경/추가/삭제했는가
    - Problem: 어떤 문제가 있었는가
    - Solution: 어떤 방식으로 해결했는가
    - Notes: 참고 사항, 추후 과제 등
- 커밋이 만들어지면 `post-commit` 훅이 자동으로 `docs/WORKLOG.md`에 요약을 추가합니다.
  - 제목은 커밋 제목과 동일하게 기록됩니다. (요구사항: “작업로그 제목 = 커밋 제목”)
  - 순번과 날짜가 함께 기록됩니다.

## CODEMAP 유지 원칙 (`docs/CODEMAP.md`)
- 코드/파일/함수/연산자/패널/핸들러 등이 추가·변경될 때마다 간단한 한 줄 요약을 추가/수정합니다.
- 항목에는 다음을 권장합니다.
  - 파일 경로
  - 주요 함수/클래스 및 역할 요약
  - 다른 모듈과의 의존 관계(있다면)
  - 예외/경계 조건 요약(있다면)

## 디렉터리 구조(초기)
- `docs/` 문서 폴더
  - `GUIDE.md`: 이 지침 파일
  - `CODEMAP.md`: 전체 코드/함수 요약(지도)
  - `WORKLOG.md`: 작업 이력 요약(순번/날짜/제목 동기화)
- `scripts/` 유틸리티 스크립트
  - `update_worklog.py`: 커밋 후 작업로그 자동 업데이트
- `.githooks/` Git 훅 디렉터리
  - `post-commit`: 커밋 생성 시 `WORKLOG.md` 자동 갱신
  - `commit-msg`: 커밋 제목/본문 형식 간단 검증
- `.gitmessage.txt`: 커밋 템플릿(필드 힌트 제공)

## 작업 흐름 요약
1) (준비) 질문이 있으면 먼저 합의 → 방향 확정
2) (구현) 최소 단위 변경/커밋 → 자동으로 `WORKLOG.md` 기록
3) (문서) 변경된 코드 반영해 `CODEMAP.md` 갱신
4) (검증) 기능 테스트/QA 후 다음 작업으로 진행

## 요청/대화 기록 관리
- 별도 폴더 `docs/REQUESTS/`에 요청·질문 요약을 날짜/세션/커밋 기준으로 관리합니다.
- 작업 중에는 파일명을 `...--PENDING.md`로 두고, 커밋이 생성되면 자동으로 PENDING 파일명을 “커밋 제목과 동일한 파일명.md”로 변경합니다. (한글 제목 허용)
- 커밋 제목과 작업로그 제목은 동일하게 유지됩니다. 요청 요약 파일명도 커밋 제목과 동일하게 유지합니다.
- 요청 내용이 중간에 바뀌면 PENDING 파일을 업데이트하고, 해당 변경이 반영되는 커밋 시점에 파일명이 갱신됩니다.
- 코딩을 시작할 때 모든 요청 조항을 일일이 확인할 필요는 없고, 검수 타이밍에 일괄 확인해도 됩니다.

### 토큰 사용량 고려와 작업 세분화 제안
- 대화/요구사항이 방대하거나, 답변/계획에 토큰 부담이 커질 것으로 예상되면 선제적으로 작업을 세분화해 진행 순서를 제안합니다.
- 제안 예시: “1) 스켈레톤 추가 → 2) 등록/해제 → 3) UI → 4) 오퍼레이터 → 5) 핸들러”처럼 독립 검증 가능한 작은 단위로 나눕니다.

### 요청 요약 작성 규칙(권장)
- 제목: 한 줄 요약(요구/변경 의도, 범위)
- 본문 권장 항목: 배경/목표, 요구사항, 변경점, 경계 조건, 영향 범위, 확인 방법, 후속 작업
- 변경 이력: 요청이 변경되면 상단에 “변경 요약”을 추가하고 본문을 최신화합니다.

## 커밋/푸시 운영 규칙
- 기본 원칙: 사용자가 “이제 커밋해/푸시해”라고 지시하면 실행합니다. 커밋 제목은 한글로, 변경 요지를 간결히 적습니다.
- 커밋 직전: `docs/CODEMAP.md`를 최신으로 갱신(해당 변경의 핵심 요약 1~2줄 반영).
- 커밋 직전: `docs/WORKLOGS/`의 PENDING 파일 내용을 이번 변경 요약(무엇/왜/어떻게/노트)으로 업데이트합니다.
- 커밋 메시지: 템플릿 사용, 제목은 변경 의도·범위가 드러나도록 작성.
- 훅 동작: pre-commit이 “PENDING 파일은 REQUESTS/와 WORKLOGS/에 각각 정확히 1개”를 보장(없으면 자동 생성, 둘 이상이면 중단). post-commit은 `docs/WORKLOG.md`를 갱신하고 두 PENDING 파일명을 커밋 제목과 동일한 파일명으로 변경합니다.
- 푸시: 기본은 `main`에 직접 푸시(향후 보호 규칙/PR 플로우로 전환 가능).

## 지침(GUIDE) 업데이트 절차
- 사용자가 “지침을 이렇게 해줘”라고 요청하면, 기존 `GUIDE.md`와 상충 여부를 먼저 검토합니다.
- 상충 시: 질문으로 대안을 제시(교체 vs 상황별 분기 등) → 합의 후 문서 업데이트.
- 비상충 시: 즉시 문서 업데이트.

## 품질 기준(요약)
- 명확성: 커밋과 로그만 읽어도 변경 의도를 파악 가능
- 일관성: 파일/함수/네이밍/스타일을 통일하고 코드맵에 반영
- 점진성: 작은 단위로 합의→구현→검증→문서 갱신

## 질문 템플릿(권장)
- 배경/목표:
- 요구사항 요약:
- 경계 조건/예외:
- UI/UX 기대치(있다면):
- 성능/메모리 고려:
- 테스트 방법:
- 브레이킹 체인지 여부:

이 문서는 프로젝트 진행 중 필요에 따라 업데이트합니다.

참고: 이 문서는 “현재 프로젝트”에 특화된 지침을 담습니다. 다른 프로젝트를 위한 도메인-중립 초기 지침은 `prompts/MASTERPROMPT.md`를 참고하세요.
